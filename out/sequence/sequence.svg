<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="632px" preserveAspectRatio="none" style="width:1049px;height:632px;background:#24272B;" version="1.1" viewBox="0 0 1049 632" width="1049px" zoomAndPan="magnify"><defs/><g><rect fill="#7FAFE1" height="58.6211" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="58" y="111.1094"/><rect fill="#7FAFE1" height="189.8633" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="247" y="111.1094"/><rect fill="#7FAFE1" height="101.9316" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="296.5" y="140.4199"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="296.5" y="330.2832"/><rect fill="#7FAFE1" height="59.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="296.5" y="490.8359"/><rect fill="#7FAFE1" height="87.9316" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="652.5" y="242.3516"/><rect fill="#7FAFE1" height="59.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="652.5" y="461.5254"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="743.5" y="359.5938"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="743.5" y="550.1465"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="63" x2="63" y1="36.4883" y2="597.457"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="252" x2="252" y1="36.4883" y2="597.457"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="301" x2="301" y1="36.4883" y2="597.457"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="657" x2="657" y1="36.4883" y2="597.457"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="748" x2="748" y1="36.4883" y2="597.457"/><line style="stroke:#7FAFE1;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="984.5" x2="984.5" y1="36.4883" y2="597.457"/><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="116" x="5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="12" y="25.5352">Фоторедактор</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="116" x="5" y="596.457"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="12" y="616.9922">Фоторедактор</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="46" x="229" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="236" y="25.5352">НМС</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="46" x="229" y="596.457"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="236" y="616.9922">НМС</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="33" x="285" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="292" y="25.5352">БД</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="33" x="285" y="596.457"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="292" y="616.9922">БД</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="91" x="612" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="619" y="25.5352">tagWatcher</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="91" x="612" y="596.457"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="619" y="616.9922">tagWatcher</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="71" x="713" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="720" y="25.5352">Статика</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="71" x="713" y="596.457"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="720" y="616.9922">Статика</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="106" x="931.5" y="5"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="938.5" y="25.5352">Потребители</text><rect fill="#7FAFE1" height="30.4883" rx="10" ry="10" style="stroke:#7FAFE1;stroke-width:0.5;" width="106" x="931.5" y="596.457"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="938.5" y="616.9922">Потребители</text><rect fill="#7FAFE1" height="58.6211" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="58" y="111.1094"/><rect fill="#7FAFE1" height="189.8633" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="247" y="111.1094"/><rect fill="#7FAFE1" height="101.9316" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="296.5" y="140.4199"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="296.5" y="330.2832"/><rect fill="#7FAFE1" height="59.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="296.5" y="490.8359"/><rect fill="#7FAFE1" height="87.9316" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="652.5" y="242.3516"/><rect fill="#7FAFE1" height="59.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="652.5" y="461.5254"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="743.5" y="359.5938"/><rect fill="#7FAFE1" height="29.3105" style="stroke:#7FAFE1;stroke-width:1.0;" width="10" x="743.5" y="550.1465"/><rect fill="#EEEEEE" height="3" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:1.0;" width="1042.5" x="0" y="67.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1042.5" y1="67.1436" y2="67.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1042.5" y1="70.1436" y2="70.1436"/><rect fill="#EEEEEE" height="23.3105" rx="10" ry="10" style="stroke:#000000;stroke-width:2.0;" width="126" x="458.25" y="56.4883"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="108" x="464.25" y="73.0566">Привязка тегов</text><polygon fill="#7FAFE1" points="79,107.1094,69,111.1094,79,115.1094,75,111.1094" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="73" x2="246" y1="111.1094" y2="111.1094"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="106.3672">1</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="98" y="106.3672">Получает список фоток</text><polygon fill="#7FAFE1" points="79,136.4199,69,140.4199,79,144.4199,75,140.4199" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="73" x2="295.5" y1="140.4199" y2="140.4199"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="135.6777">2</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="98" y="135.6777">Получает список тегов</text><polygon fill="#7FAFE1" points="284.5,165.7305,294.5,169.7305,284.5,173.7305,288.5,169.7305" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="63" x2="290.5" y1="169.7305" y2="169.7305"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="70" y="164.9883">3</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="83" y="164.9883">Записывает инфу по тегам</text><rect fill="#EEEEEE" height="3" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:1.0;" width="1042.5" x="0" y="198.3857"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1042.5" y1="198.3857" y2="198.3857"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1042.5" y1="201.3857" y2="201.3857"/><rect fill="#EEEEEE" height="23.3105" rx="10" ry="10" style="stroke:#000000;stroke-width:2.0;" width="223" x="409.75" y="187.7305"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="205" x="415.75" y="204.2988">Синхронизация информации</text><polygon fill="#7FAFE1" points="312.5,238.3516,302.5,242.3516,312.5,246.3516,308.5,242.3516" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="306.5" x2="651.5" y1="242.3516" y2="242.3516"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="318.5" y="237.6094">4</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="331.5" y="237.6094">Получает инфу об изменениях</text><polygon fill="#7FAFE1" points="268,267.6621,258,271.6621,268,275.6621,264,271.6621" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="262" x2="651.5" y1="271.6621" y2="271.6621"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="274" y="266.9199">5</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="287" y="266.9199">Передает информацию по тегам</text><polygon fill="#7FAFE1" points="640.5,296.9727,650.5,300.9727,640.5,304.9727,644.5,300.9727" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="252" x2="646.5" y1="300.9727" y2="300.9727"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="259" y="296.2305">6</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="272" y="296.2305">Коллбек с текущей привязкой тегов к фоткам</text><polygon fill="#7FAFE1" points="317.5,326.2832,307.5,330.2832,317.5,334.2832,313.5,330.2832" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="311.5" x2="656.5" y1="330.2832" y2="330.2832"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="323.5" y="325.541">7</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="336.5" y="325.541">Сверяет инфу и обновляет при необходимости</text><polygon fill="#7FAFE1" points="731.5,355.5938,741.5,359.5938,731.5,363.5938,735.5,359.5938" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="301.5" x2="737.5" y1="359.5938" y2="359.5938"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="308.5" y="354.8516">8</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="321.5" y="354.8516">Отправляет инфу по тегам и counter фотки</text><polygon fill="#7FAFE1" points="759.5,384.9043,749.5,388.9043,759.5,392.9043,755.5,388.9043" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="753.5" x2="983.5" y1="388.9043" y2="388.9043"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="765.5" y="384.1621">9</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="778.5" y="384.1621">Получают теги</text><rect fill="#EEEEEE" height="3" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:1.0;" width="1042.5" x="0" y="417.5596"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1042.5" y1="417.5596" y2="417.5596"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1042.5" y1="420.5596" y2="420.5596"/><rect fill="#EEEEEE" height="23.3105" rx="10" ry="10" style="stroke:#000000;stroke-width:2.0;" width="176" x="433.25" y="406.9043"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="158" x="439.25" y="423.4727">Альтернативный флоу</text><polygon fill="#7FAFE1" points="640.5,457.5254,650.5,461.5254,640.5,465.5254,644.5,461.5254" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="252" x2="646.5" y1="461.5254" y2="461.5254"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="259" y="456.7832">10</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294" x="281" y="456.7832">Сообщает об изменениях в карточке с тегами</text><polygon fill="#7FAFE1" points="317.5,486.8359,307.5,490.8359,317.5,494.8359,313.5,490.8359" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="311.5" x2="651.5" y1="490.8359" y2="490.8359"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="323.5" y="486.0938">11</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="345.5" y="486.0938">Сверяет инфу и обновляет при необходимости</text><polygon fill="#7FAFE1" points="731.5,546.1465,741.5,550.1465,731.5,554.1465,735.5,550.1465" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="301.5" x2="737.5" y1="550.1465" y2="550.1465"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="308.5" y="545.4043">12</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="330.5" y="545.4043">Отправляет обновленную инфу</text><polygon fill="#7FAFE1" points="759.5,575.457,749.5,579.457,759.5,583.457,755.5,579.457" style="stroke:#7FAFE1;stroke-width:1.0;"/><line style="stroke:#7FAFE1;stroke-width:1.0;" x1="753.5" x2="983.5" y1="579.457" y2="579.457"/><text fill="#7FAFE1" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="765.5" y="574.7148">13</text><text fill="#7FAFE1" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="787.5" y="574.7148">Получают обновленные теги</text><!--MD5=[7c91208b69d393444fdd0ce357a29152]
@startuml
skinparam DefaultFontColor #7fafe1
skinparam BackgroundColor #24272b
skinparam roundcorner 20

skinparam sequence {
    ArrowColor #7fafe1
    LifeLineBorderColor #7fafe1 
    LifeLineBackgroundColor #7fafe1
    ParticipantBorderColor #7fafe1 
    ParticipantBackgroundColor #7fafe1 
    ParticipantFontColor white

    ActorBorderColor #7fafe1 
    ActorBackgroundColor #7fafe1
}

autonumber
participant "Фоторедактор" as FE
participant "НМС" as NMS
participant "БД" as DB
participant "tagWatcher" as TW
participant "Статика" as Static
participant "Потребители" as CMS

== Привязка тегов == 
NMS -> FE: Получает список фоток
activate FE
activate NMS
DB -> FE: Получает список тегов

activate DB
FE -> DB: Записывает инфу по тегам
deactivate FE
== Синхронизация информации ==
TW -> DB: Получает инфу об изменениях
deactivate DB
activate TW

TW -> NMS: Передает информацию по тегам

NMS -> TW: Коллбек с текущей привязкой тегов к фоткам
deactivate NMS
TW -> DB: Сверяет инфу и обновляет при необходимости
deactivate TW
activate DB

DB -> Static: Отправляет инфу по тегам и counter фотки
deactivate DB
activate Static
CMS -> Static: Получают теги
deactivate Static

== Альтернативный флоу ==
NMS -> TW: Сообщает об изменениях в карточке с тегами
activate TW
TW -> DB: Сверяет инфу и обновляет при необходимости
activate DB
deactivate TW
DB -> Static: Отправляет обновленную инфу
deactivate DB
activate Static
CMS -> Static: Получают обновленные теги
deactivate Static

deactivate FE
@enduml

PlantUML version 1.2022.7(Mon Aug 22 20:01:30 MSK 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>